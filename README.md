# EasyDoggie
[English](https://github.com/easydoggie/EasyDoggie/blob/master/README_en.md)
> æ„è¦‹ã‚„æ”¹ä¿®è¦æœ›ã¯ã€[Isuues](https://github.com/easydoggie/EasyDoggie/issues/new/choose)ã‚‚ã—ãã¯@sumomo_99ã¸DMã§ã„ãŸã ã‘ã‚Œã°ã€å¯èƒ½ãªé™ã‚Šæ¤œè¨ã€å¯¾å¿œã‚’ã—ã¾ã™ã€‚æ°—è»½ã«å•ã„åˆã‚ã›ã¦ãã ã•ã„ã€‚ğŸ˜  
  
## 2019å¹´æœ«ã€€Î±ç‰ˆãƒªãƒªãƒ¼ã‚¹äºˆå®š
pre-Î±ç‰ˆã‚’å…¬é–‹ä¸­ã€‚  
ãƒã‚°ã€æ©Ÿèƒ½è¦æœ›ãªã©ã¯[ã“ã¡ã‚‰](https://github.com/easydoggie/EasyDoggie/issues/new/choose)ã€‚

Easy Develop and Operation of Game InfrastructurE  
[![logo](https://github.com/easydoggie/EasyDoggie/blob/master/images/logo2.png)](https://easydoggie.github.io/EasyDoggie/)
##  ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ãƒ•ãƒ©ã¯ã€ã‚‚ã£ã¨æ¥½ã«ã§ãã‚‹ï¼

ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³å‘ã‘ã‚²ãƒ¼ãƒ ã¯ãƒ¬ãƒƒãƒ‰ã‚ªãƒ¼ã‚·ãƒ£ãƒ³åŒ–ãŒé€²ã¿ã€å°è¦æ¨¡ã®é–‹ç™ºä¼šç¤¾ã§ã¯ç”Ÿãæ®‹ã‚‹ã®ãŒé›£ã—ããªã£ã¦ã„ã¾ã™ã€‚æ–¬æ–°ãªã‚²ãƒ¼ãƒ ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ãƒ•ãƒ©ã¨ã—ã¦ã©ã®ã‚ˆã†ãªè²¢çŒ®ãŒã§ãã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿç¾å®Ÿå•é¡Œã¨ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ‚©ã¿ã‚’æŠ±ãˆã¦ã„ã‚‹é–‹ç™ºä¼šç¤¾ãŒå¤šã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚

> ãƒ»ã€€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒã§ã™ãŒã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚‚å…¼å‹™ã—ã¦ã„ã¾ã™ã€‚ã‚¤ãƒ³ãƒ•ãƒ©ã®æ§‹ç¯‰ã€é‹ç”¨ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãŒé€²ã¿ã¾ã›ã‚“
>
> ãƒ»ã€€ã‚¤ãƒ³ãƒ•ãƒ©ã®åˆå¿ƒè€…ã—ã‹ä¼šç¤¾ã«ã„ã¾ã›ã‚“ã€‚ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­è¨ˆã®æ–¹æ³•ãŒã‚ã‹ã‚Šã¾ã›ã‚“ã€‚å…¨éƒ¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã‚ˆã„ã§ã™ã‹ï¼Ÿ
>
> ãƒ»ã€€ã‚³ãƒ³ãƒ†ãƒŠã‚„ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã«èˆˆå‘³ãŒã‚ã‚Šã¾ã™ã€‚ã§ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã‚„ç›£è¦–ã®æ–¹æ³•ãŒã‚ã‹ã‚‰ãªã„ã§ã™ã€‚
>
> ãƒ»ã€€ã‚¤ãƒ³ãƒ•ãƒ©ã®è¨­è¨ˆã€æ§‹ç¯‰ã€é‹ç”¨ã«å®Ÿç¸¾ã®ã‚ã‚‹å¤–éƒ¨ãƒ™ãƒ³ãƒ€ã«ä¾é ¼ã—ãŸã„ã®ã§ã™ãŒã€å¤–æ³¨ã‚³ã‚¹ãƒˆãŒå¿ƒé…ã§ã™ã€‚

ã“ã®ã‚ˆã†ãªã‚¤ãƒ³ãƒ•ãƒ©è¨­è¨ˆã€æ§‹ç¯‰ã€é‹ç”¨ã®æ‚©ã¿ã‚’è§£æ±ºã™ã‚‹ã®ã«ã€æ§‹ç¯‰æ¸ˆã¿ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’å†åˆ©ç”¨ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚  

ãã†ã€**EasyDoggie**ãªã‚‰è¨­è¨ˆæ¸ˆã¿ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰CI/CDã€é‹ç”¨ç›£è¦–ã¾ã§ã€ãã‚ã£ã¦ã„ã¾ã™ï¼

## EasyDoggieæ§‹æˆã‚¤ãƒ¡ãƒ¼ã‚¸
![structure](https://github.com/easydoggie/EasyDoggie/blob/master/images/structure_all.png)

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•
### Helmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
EasyDoggieã¯Kubernetesä¸Šã§å‹•ä½œã—ã¾ã™ã€‚ã‚³ãƒ³ãƒ†ãƒŠã®åˆæœŸè¨­å®šã¯Helmã‚’åˆ©ç”¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã¾ã™ã€‚
åˆã‚ã«Helmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨åˆæœŸè¨­å®šã‚’è¡Œã„ã¾ã™ã€‚
Helmã«ã¤ã„ã¦ã¯ã€[ãƒ–ãƒ­ã‚°](https://www.skyarch.net/blog/?p=16335)ã§ã‚‚ç´¹ä»‹ã‚’ã—ã¦ã„ã¾ã™ã€‚Helmã®æ¦‚è¦ã‚’çŸ¥ã‚ŠãŸã„å ´åˆã«ã€å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

```text
$ wget https://storage.googleapis.com/kubernetes-helm/helm-v2.13.1-linux-amd64.tar.gz
$ tar xvfz helm-v2.13.1-linux-amd64.tar.gz
$ sudo mv linux-amd64/helm /usr/local/bin/helm
$ helm init
```

Helmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã¤ã„ã¦ã¯ã€[ãƒ–ãƒ­ã‚°](https://www.skyarch.net/blog/?p=16350)ã§ã‚‚ç´¹ä»‹ã‚’ã—ã¦ã„ã‚‹ã®ã§ã€å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚
GKEãªã©RBACã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ç’°å¢ƒã§ã¯ã€Tillerã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«(helm init)ã™ã‚‹å‰ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®è¨­å®šã‚’è¡Œã£ã¦ãã ã•ã„ã€‚ã¾ãŸã€helm initã‚’è¡Œã†ã¨ãã«ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®æŒ‡å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
```text
$ kubectl apply -f https://raw.githubusercontent.com/easydoggie/EasyDoggie/master/serviceaccount/helm-account.yaml
$ helm init --service-account helm
```

### Helmãƒªãƒã‚¸ãƒˆãƒªã®è¿½åŠ 
EasyDoggieç”¨ã®Helmãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ ã—ã¾ã™ã€‚
```text
$ helm repo add easydoggie https://easydoggie.github.io/helm-repo/releases
$ helm repo list
NAME                    URL
stable                  https://kubernetes-charts.storage.googleapis.com
local                   http://127.0.0.1:8879/charts
easydoggie              https://easydoggie.github.io/helm-repo/releases
```

### EasyDoggieã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
Helmã‚’åˆ©ç”¨ã—ã¦EasyDoggieã‚’Kubernetesã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚"easydoggie"ãƒãƒ£ãƒ¼ãƒˆã¯ã€ã™ã¹ã¦ã®æ§‹æˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
```text
$ helm install --name easydoggie easydoggie/easydoggie
$ kubectl get pods
NAME                                                        READY   STATUS    RESTARTS   AGE
easydoggie-nginx-ingress-controller-749677776f-kb2fl        1/1     Running   0          30s
easydoggie-nginx-ingress-default-backend-8686dd6ff7-qmgdv   1/1     Running   0          30s
gitea-6dc55f758d-cwkt9                                      1/1     Running   0          31s
nginx-64f88989bc-n97ml                                      1/1     Running   0          30s
nginx-unit-5ff6499cb5-9ldnt                                 1/1     Running   0          30s
node-cb997ff45-psj4n                                        1/1     Running   0          30s
```
å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯¾è±¡ã®ãƒãƒ£ãƒ¼ãƒˆã‚’æŒ‡å®šã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã—ã¦ãã ã•ã„ã€‚ä»¥ä¸‹ã¯ã€Nginxã ã‘ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ä¾‹ã§ã™ã€‚
```text
$ helm install --name nginx easydoggie/nginx
```
å€‹åˆ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã®è©³ç´°ã¯ã€[åˆ¥ãƒšãƒ¼ã‚¸](https://easydoggie.github.io/EasyDoggie/install/)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
## ä½¿ã„æ–¹
2019å¹´08æœˆ21æ—¥æ™‚ç‚¹ã§ã¯ã€ä»¥ä¸‹ã®æ§‹æˆã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ã¾ã™ã€‚
![structure_2](https://github.com/easydoggie/EasyDoggie/blob/master/images/structure2.png)

## è¨­å®šæ–¹æ³•
æ§‹æˆãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç­‰ã®å¤‰æ›´ã¯ã€[åˆ¥ãƒšãƒ¼ã‚¸](https://easydoggie.github.io/EasyDoggie/config/)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

![qr](https://github.com/easydoggie/EasyDoggie/blob/master/images/easydoggie_qr2.png)

# ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
MIT

# å”è³›
[![skyarch](https://github.com/easydoggie/EasyDoggie/blob/master/images/skyarch.gif)](https://www.skyarch.net/)